lxc.network.type = veth
lxc.network.link={{ net_link }}
lxc.network.flags=up
lxc.network.name={{ net_name }}
lxc.network.ipv4={{ ipv4 }}
lxc.network.hwaddr={{ net_hwaddr }}
lxc.utsname = {{ utsname }}
lxc.autodev=1
lxc.hook.autodev=/var/lib/lxc/hook-autodev
lxc.tty = 4
lxc.pts = 1024
lxc.rootfs = /srv/lxc/{{ utsname }}-rootfs
lxc.mount = /var/lib/lxc/{{ utsname }}/fstab
#lxc.cap.drop = sys_module mac_admin mac_override mknod
lxc.cap.drop = sys_module mac_admin mac_override

# When using LXC with apparmor, uncomment the next line to run unconfined:
#lxc.aa_profile = unconfined

lxc.cgroup.devices.deny = a
# Allow any mknod (but not using the node)
lxc.cgroup.devices.allow = c *:* m
lxc.cgroup.devices.allow = b *:* m

# /dev/null and zero
lxc.cgroup.devices.allow = c 1:3 rwm
lxc.cgroup.devices.allow = c 1:5 rwm
# consoles
lxc.cgroup.devices.allow = c 5:1 rwm
lxc.cgroup.devices.allow = c 5:0 rwm
lxc.cgroup.devices.allow = c 4:0 rwm
lxc.cgroup.devices.allow = c 4:1 rwm
# /dev/{,u}random
lxc.cgroup.devices.allow = c 1:9 rwm
lxc.cgroup.devices.allow = c 1:8 rwm
lxc.cgroup.devices.allow = c 136:* rwm
lxc.cgroup.devices.allow = c 5:2 rwm
# rtc
lxc.cgroup.devices.allow = c 254:0 rwm
# kvm
lxc.cgroup.devices.allow = c 10:232 rwm
lxc.cgroup.devices.allow = c 1:7 rwm
lxc.cgroup.devices.allow = c 10:228 rwm
# loop devices
lxc.cgroup.devices.allow = b 7:* rwm
# dev/mapper
lxc.cgroup.devices.allow = c 10:* rwm
# dm devices
lxc.cgroup.devices.allow = b 253:* rwm
